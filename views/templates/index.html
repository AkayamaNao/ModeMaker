{% extends "layout.html" %}
{% block content %}
<div class="container" style="margin-top: 10px;">
    <div style="text-align: center" class="row">
        <div style="display: inline-block">
            <form action="/upload" name="uploadform" method="POST" enctype="multipart/form-data">
                <label for="myImage" class="btn btn-primary">
                    <span>画像を選択</span>
                    <input type="file" name="image" id="myImage" accept="image/png, image/jpeg" style="display: none">
                </label>
            </form>
        </div>
        {% if image %}
        <div style="display: inline-block;  margin-left: 500px">
            <a href="{{ image }}" download="" class="btn btn-info">保存</a>
        </div>
        {% endif %}
    </div>

    {% if image %}
    <div class="row">
        <div style="text-align: center">
            <img id="preview" src="{{ image }}"
                 style="margin-top: 10px; margin-bottom: 10px; vertical-align: bottom; margin-left: auto; margin-right: auto">
        </div>
        <form action="/" method="POST" name="imgform" enctype=multipart/form-data>
            <input type="hidden" id="img_file" name="img_file" value="{{ image }}">
            <input type="hidden" id="x" name="x">
            <input type="hidden" id="y" name="y">
            <input id="selected_color" type="hidden" name="color">
            <section class="demo">
                カラーパレット　
                <div class="center" style="margin-right: 30px;">
                    <div class="color-picker"></div>
                </div>
                <input type="hidden" id="default_color" value="{{ color }}">
                <label for="range">
                    <span>細かさ　</span>
                    <input id="range" type="range" name="range" min="2" max="20" value="{{ k }}">
                </label>
            </section>
        </form>
    </div>
    {% endif %}
    <div class="row">
        <h1>使い方</h1>
        <h4>服の色を変えて好みの服を作ることができるよ！</h4>
        <ol>
            <li>画像をアップロード</li>
            <li>カラーパレットで色を選んでその色にしたい箇所を画像上でクリック</li>
            <li>色を変えたい箇所以外も変わってしまう場合は細かさを上げる</li>
            <li>完成したら保存をクリックしてダウンロード</li>
        </ol>
    </div>
</div>

<script type="text/javascript" src="./static/pickr.js"></script>
<script type="text/javascript" src="./static/main.js"></script>
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

{% endblock %}